<div class="table-responsive" *ngIf="!updating && datasourceMetrics">
    <table style="width: 100%">
        <thead>
            <tr>
                <th>
                    <span>Connection Pool Usage</span>
                    (active: {{ datasourceMetrics.active.value }}, min:
                    {{ datasourceMetrics.min.value }}, max:
                    {{ datasourceMetrics.max.value }}, idle:
                    {{ datasourceMetrics.idle.value }})
                </th>
                <th class="text-right">Count</th>
                <th class="text-right">Mean</th>
                <th class="text-right">Min</th>
                <th class="text-right">p50</th>
                <th class="text-right">p75</th>
                <th class="text-right">p95</th>
                <th class="text-right">p99</th>
                <th class="text-right">Max</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Acquire</td>
                <td class="text-right">
                    {{ datasourceMetrics.acquire.count }}
                </td>
                <td class="text-right">
                    {{
                        filterNaN(datasourceMetrics.acquire.mean)
                            | number: "1.0-2"
                    }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.acquire["0.0"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.acquire["0.5"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.acquire["0.75"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.acquire["0.95"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.acquire["0.99"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{
                        filterNaN(datasourceMetrics.acquire.max)
                            | number: "1.0-2"
                    }}
                </td>
            </tr>
            <tr>
                <td>Creation</td>
                <td class="text-right">
                    {{ datasourceMetrics.creation.count }}
                </td>
                <td class="text-right">
                    {{
                        filterNaN(datasourceMetrics.creation.mean)
                            | number: "1.0-2"
                    }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.creation["0.0"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.creation["0.5"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.creation["0.75"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.creation["0.95"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.creation["0.99"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{
                        filterNaN(datasourceMetrics.creation.max)
                            | number: "1.0-2"
                    }}
                </td>
            </tr>
            <tr>
                <td>Usage</td>
                <td class="text-right">
                    {{ datasourceMetrics.usage.count }}
                </td>
                <td class="text-right">
                    {{
                        filterNaN(datasourceMetrics.usage.mean)
                            | number: "1.0-2"
                    }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.usage["0.0"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.usage["0.5"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.usage["0.75"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.usage["0.95"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{ datasourceMetrics.usage["0.99"] | number: "1.0-3" }}
                </td>
                <td class="text-right">
                    {{
                        filterNaN(datasourceMetrics.usage.max) | number: "1.0-2"
                    }}
                </td>
            </tr>
        </tbody>
    </table>
</div>
